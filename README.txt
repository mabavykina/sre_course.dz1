Порядок действий:
-----------------
1. Развернула 6 виртуальных машин в CloudMTС (3 etcd, 2 bd, 1 balancer)
2. Подключилась к виртуальной машине с balancer и установила Ancible
3. Создала роль с помощью ansible-galaxy
4. Склонировала https://github.com/vitabaks/postgresql_cluster.git в папку c ansible
5. Перенесла ключи с локальной машины на balancer
6. Отредактировала файл inventory, добавив туда ip для etcd, bd и balancer, а также путь к ключам
7. Отредактировала файл main.yaml
8. Сделала деплой плейбука deploy-pgcluster.yaml
9. Настроила подключение к БД (отредактировала на машинах с бд pg_hba.conf для доступа через balancer)
10. Проверила подключение к базе через DataGrip
9. Установила на локальной машине helm и создала каталог с шаблоном
10. Отредактировала файл Chart.yaml, values.yaml, deployment.yaml, создала configmap.yaml для подключению через другой порт.
11. Установила helm chart, приложив свой конфиг, полученый по почте
12. Установила на локальной машине OpenLens и подключилась к кластеру через мой конфиг
13. Проверила корректность работы кластер
15. Скопировала из пода скрипт для миграции и запустила его в своей бд
16. Добавила данные в базу и проверила работу api через postman запросом GET http://91.185.85.213/cities/?Host=weather-api.sre-course
-----------------
В репазитории https://github.com/mabavykina/sre_course.dz1 лежит папка ansible в которой можно увидеть, какие изменения были внесены в файл inventory и main.yaml, а также папка helm, где аналогично можно увидеть мои измененения.
Namespace: sre-cource-student-5
-----------------
Также настроила на последнию версию образа tag: "f0135e1"